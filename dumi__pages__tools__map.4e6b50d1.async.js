"use strict";(self.webpackChunk_antv_l7_site=self.webpackChunk_antv_l7_site||[]).push([[9887],{91808:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(41398),a=n(72492),s=n(7566),i=n(15723),c=n.n(i),l=n(38084),o=n.n(l),u=n(11440),d=n.n(u),p=n(54931),h=n.n(p),v=n(51655),f=n.n(v),x=n(44004),m=n.n(x),y=n(36824),j=n(85449),b=n(72631),g=n(16678),Z=n(31354),k=n(46748),w=n(13721),C=n(22419),N=n(3306),A=n(3086),S=n(51747),L=n(88662),O=n(10068),J=n(49783),V=n(57273),D=n(24832),T=n(13026),_=n(16118),B=n(58863),G={autoFit:!0,fillColor:"#377eb8",opacity:.3,strokeColor:"blue",lineWidth:.5,state:{active:{strokeColor:"green",lineWidth:1.5,lineOpacity:.8},select:{strokeColor:"red",lineWidth:1.5,lineOpacity:.8}}},z={mapType:"Gaode",mapOptions:{style:"light",center:[120.210792,30.246026],zoom:3,maxZoom:10,doubleClickZoom:!1}},P=[{key:"GeoJSON",value:"GeoJSON",label:"GeoJSON"},{key:"TopoJSON",value:"TopoJSON",label:"TopoJSON"},{key:"JSON",value:"JSON",label:"JSON"},{key:"CSV",value:"CSV",label:"CSV"},{key:"KML",value:"KML",label:"KML"}],E={DataVSource:[{value:"areas_v3",label:"areas_v3"},{value:"areas_v2",label:"areas_v2"}],RDBSource:[{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"2021",label:"2021"},{value:"2020",label:"2020"},{value:"2019",label:"2019"},{value:"2018",label:"2018"},{value:"2017",label:"2017"},{value:"2016",label:"2016"},{value:"2015",label:"2015"}]},M={sourceType:"RDBSource",sourceVersion:"2023",currentLevel:"country",currentName:"中国",currentCode:1e5,hasSubChildren:!0,childrenLevel:"province",datatype:"GeoJSON"},K=function(e){switch(e){case"country":return"province";case"province":return"city";case"city":case"county":return"county";default:return}},F=n(46228),I=function(){var e,t,n,a,s=(0,r.useState)({data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}),i=m()(s,2),l=i[0],u=i[1],p="middle",v=(0,r.useState)(M),x=m()(v,2),I=x[0],U=x[1],Q=(0,r.useState)([{currentLevel:"country",currentName:"中国",currentCode:1e5}]),R=m()(Q,2),W=R[0],q=R[1],Y=(0,r.useMemo)((function(){return function(e){switch(e){case"country":return["province","city","county"];case"province":return["city","county"];case"city":return["county"];default:return[]}}(I.currentLevel)}),[I.currentLevel]),$=function(e,t){U(f()(f()({},I),{},h()({},e,t)))},H=(0,r.useState)(),X=m()(H,2),ee=X[0],te=X[1],ne=function(){var e=d()(o()().mark((function e(){var t,n,r,a,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=I.currentLevel,n=I.hasSubChildren,r=I.childrenLevel,a=I.currentCode,n){e.next=7;break}return e.next=4,null==ee?void 0:ee.getChildrenData({parentLevel:t,parentAdcode:a,childrenLevel:t});case 4:s=e.sent,e.next=10;break;case 7:return e.next=9,null==ee?void 0:ee.getChildrenData({parentLevel:t,parentAdcode:a,childrenLevel:r});case 9:s=e.sent;case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=d()(o()().mark((function e(){var t,n,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.datatype,n=I.currentName,e.next=3,ne();case 3:r=e.sent,(0,B.O6)(n,r,t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=d()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.currentName,e.next=3,ne();case 3:return n=e.sent,e.abrupt("return",(0,B.O6)(t,n,"SVG"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=d()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.datatype,e.next=3,fetch("https://mdn.alipayobjects.com/afts/file/A*zMVuS7mKBI4AAAAAAAAAAAAADrd2AQ/%E5%85%A8%E5%9B%BD%E8%BE%B9%E7%95%8C.json");case 3:return e.next=5,e.sent.json();case 5:n=e.sent,(0,B.O6)("中国边界",n,t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=d()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:t=e.sent,navigator.clipboard.writeText(JSON.stringify(t)),k.ZP.success("复制成功");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=d()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return t=e.sent,e.next=5,(0,B.Y2)(t);case 5:n=e.sent,navigator.clipboard.writeText(n),k.ZP.success("复制成功");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){var e=I.sourceType,t=I.sourceVersion,n=new _.DataSourceMap[e]({version:t});te(n),n.getData({level:"province",code:1e5}).then((function(e){u((function(t){return f()(f()({},t),{},{data:e})})),k.ZP.info("".concat(I.sourceVersion,"版加载完成"))}))}),[I.sourceType,I.sourceVersion]);var le=function(){var e=d()(o()().mark((function e(t){var n,r,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("county"!==(n=K(I.currentLevel))){e.next=3;break}return e.abrupt("return");case 3:return r={currentLevel:n,currentName:t.feature.properties.name,currentCode:t.feature.properties.adcode},q([].concat(c()(W),[r])),U(f()(f()({},I),r)),e.next=8,null==ee?void 0:ee.getChildrenData({parentLevel:r.currentLevel,parentAdcode:r.currentCode,childrenLevel:K(n)});case 8:a=e.sent,u((function(e){return f()(f()({},e),{},{data:a})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=d()(o()().mark((function e(){var t,n,r,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=W.slice(0,W.length-1),n=t[t.length-1],"country"!==(r=I.currentLevel)){e.next=5;break}return e.abrupt("return");case 5:return U(f()(f()({},I),n)),q(t),e.next=9,null==ee?void 0:ee.getChildrenData({parentLevel:n.currentLevel,parentAdcode:n.currentCode,childrenLevel:r});case 9:a=e.sent,u((function(e){return f()(f()({},e),{},{data:a})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=(0,r.useMemo)((function(){return[{layer:"myChoroplethLayer",fields:[{field:"name",formatField:function(){return"名称"}},{field:"adcode",formatField:"行政编号"}]}]}),[I.sourceType,I.currentLevel]);return(0,F.jsx)(w.Z,{spinning:!1,children:(0,F.jsxs)("div",{style:{display:"flex"},children:[(0,F.jsxs)(Z.$2,f()(f()({},z),{},{style:{height:"calc(100vh - 240px)",width:"calc(100% - 300px)"},children:[(0,F.jsx)(Z.Co,f()(f()({},G),{},{source:l,onDblClick:le,onUndblclick:oe,id:"myChoroplethLayer"})),(0,F.jsx)(Z.Kh,{closeButton:!1,closeOnClick:!1,anchor:"bottom-left",trigger:"hover",items:ue}),(0,F.jsx)(Z.w3,{position:"bottomright"}),(0,F.jsx)(Z.br,{position:"bottomleft",children:(0,F.jsxs)(C.Z,{style:{width:200,padding:12},children:[(0,F.jsx)("p",{children:" 双击行政区域下钻"}),(0,F.jsx)("p",{children:"双击非行政区域上卷"})]})})]})),(0,F.jsxs)("div",{className:"panel",children:[(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsx)(A.Z,{span:8,className:"label",children:"版本："}),(0,F.jsx)(A.Z,{span:16,style:{textAlign:"right"},children:(0,F.jsx)(S.Z,{value:I.sourceVersion,size:"small",onChange:$.bind(null,"sourceVersion"),options:E[I.sourceType]})})]}),(0,F.jsx)(L.Z,{style:{margin:"8px 0"}}),(0,F.jsxs)(O.Z,{title:"当前地区",children:[(0,F.jsx)(O.Z.Item,{style:{width:"180px"},label:"名称",children:I.currentName}),(0,F.jsx)(O.Z.Item,{label:"adcode",children:I.currentCode})]}),(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsx)(A.Z,{span:12,className:"label",children:"包含子区域:"}),(0,F.jsx)(A.Z,{span:12,style:{textAlign:"right"},children:(0,F.jsx)(J.Z,{style:{width:"32px"},checked:I.hasSubChildren,onChange:$.bind(null,"hasSubChildren")})})]}),I.hasSubChildren&&(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsx)(A.Z,{span:10,className:"label",children:"子区域级别:"}),(0,F.jsx)(A.Z,{span:14,style:{textAlign:"right"},children:(0,F.jsxs)(V.ZP.Group,{defaultValue:Y[0]||"province",size:p,value:I.childrenLevel,onChange:function(e){$("childrenLevel",e.target.value)},children:[-1!==Y.indexOf("province")&&(0,F.jsx)(V.ZP.Button,{value:"province",children:"省"}),-1!==Y.indexOf("city")&&(0,F.jsx)(V.ZP.Button,{value:"city",children:"市"}),(0,F.jsx)(V.ZP.Button,{value:"county",children:"县"})]})})]}),(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsx)(A.Z,{span:6,className:"label",children:"数据下载:"}),(0,F.jsxs)(A.Z,{span:18,style:{textAlign:"right"},children:[(0,F.jsx)(S.Z,{value:I.datatype,style:{width:120},size:p,options:P,onChange:$.bind(null,"datatype")}),(0,F.jsx)(D.Z,{type:"primary",style:{marginLeft:"8px"},icon:(0,F.jsx)(y.Z,{}),size:p,onClick:re}),(0,F.jsx)(D.Z,{type:"primary",style:{marginLeft:"8px"},icon:(0,F.jsx)(j.Z,{}),onClick:ie,size:p})]})]}),(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsx)(A.Z,{span:6,className:"label",children:"SVG下载:"}),(0,F.jsxs)(A.Z,{span:18,style:{textAlign:"right"},children:[(0,F.jsxs)(D.Z,{style:{pointerEvents:"none",width:120},children:[" ",(0,F.jsx)(b.Z,{})," SVG"," "]}),(0,F.jsx)(D.Z,{type:"primary",style:{marginLeft:"8px"},icon:(0,F.jsx)(y.Z,{}),size:p,onClick:ae}),(0,F.jsx)(D.Z,{type:"primary",style:{marginLeft:"8px"},icon:(0,F.jsx)(j.Z,{}),onClick:ce,size:p})]})]}),(0,F.jsxs)(N.Z,{className:"row",children:[(0,F.jsxs)(A.Z,{span:12,className:"label",children:["中国边界下载"," ",(0,F.jsxs)(T.Z,{placement:"top",overlayInnerStyle:{color:"#111"},color:"#fff",title:"全国边界下载：包含国界线、海岸线、香港界、海上省界、未定国界等线要素.",children:[" ",(0,F.jsx)(g.Z,{})]})]}),(0,F.jsx)(A.Z,{span:12,style:{textAlign:"right"},children:(0,F.jsx)(D.Z,{type:"primary",style:{marginLeft:"8px"},icon:(0,F.jsx)(y.Z,{}),onClick:se,size:p})})]}),(0,F.jsxs)("div",{className:"originData",style:{},children:[(0,F.jsx)("div",{children:"数据来源："}),(0,F.jsx)("a",{href:"".concat(null==ee||null===(e=ee.info)||void 0===e||null===(t=e.desc)||void 0===t?void 0:t.href),children:"".concat(null==ee||null===(n=ee.info)||void 0===n||null===(a=n.desc)||void 0===a?void 0:a.text)})]})]})]})})},U=n(49797),Q=function(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(a.h,{}),(0,F.jsx)(U.Z,{}),(0,F.jsx)(I,{}),(0,F.jsx)(s.$,{})]})}},49797:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(51655),a=n.n(r),s=n(66541),i=(n(41398),n(41490),n(46228)),c=function(e){var t=e.url,n=e.title,r=e.to;return(0,i.jsxs)(s.rU,{className:"dumi-default-logo",to:r,children:[(0,i.jsx)("img",{src:t,alt:n}),n]})},l=(n(28776),function(e){var t=(0,s.TH)().pathname,n=e.nav;return(0,i.jsx)("ul",{className:"dumi-default-navbar",children:n.map((function(e){return(0,i.jsx)("li",{children:/^(\w+:)\/\/|^(mailto|tel):/.test(e.link)?(0,i.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:e.title}):(0,i.jsx)(s.rU,a()(a()({to:e.link},t.startsWith(e.activePath||e.link)?{className:"active"}:{}),{},{children:e.title}))},e.link)}))})}),o=(n(64522),{nav:[{title:"地图下载",order:1,link:"../tools/map",activePath:"/tools/map"},{title:"数据 SDK",order:2,link:"../tools/sdk",activePath:"/tools/sdk"},{title:"数据服务",order:3,link:"../tools/service",activePath:"/tools/service"}],url:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*uQbXRLw_Q2UAAAAAAAAAAAAADmJ7AQ/original",to:"/tools",title:"GISDATA"}),u=function(){return(0,i.jsx)("div",{className:"dumi-default-header",children:(0,i.jsxs)("div",{className:"dumi-default-header-content",style:{height:"60px"},children:[(0,i.jsx)("section",{className:"dumi-default-header-left",children:(0,i.jsx)(c,a()({},o))}),(0,i.jsx)("section",{className:"dumi-default-header-right",children:(0,i.jsx)(l,{nav:o.nav})})]})})}},58863:function(e,t,n){n.d(t,{O6:function(){return u},Y2:function(){return o}});var r=n(54427),a=n(53757),s=n.n(a),i=(n(51441),n(76257)),c=n.n(i),l=n(36329);function o(e){var t=(0,r.Z)(e).bbox||[-180,-90,180,90],n=s()({mapExtent:{left:t[0],bottom:t[1],right:t[2],top:t[3]},precision:8,attributes:["properties.adcode","properties.name",{property:"stroke",value:"blue",type:"static"},{property:"fill",value:"#aaa",type:"static"}],viewportSize:{width:1e3,height:800},fitToViewBox:!0,outputFormat:"svg"}).convert(e).join();return'<svg width="'.concat(1e3,'" height="').concat(800,'" xmlns="http://www.w3.org/2000/svg"> ').concat(n,"</svg>")}function u(e,t,n){var r="SVG"===n?o(t):"TopoJSON"===n?function(e){return JSON.stringify(l.MM({data:e}))}(t):"GeoJSON"===n?function(e){return JSON.stringify(e)}(t):"CSV"===n?function(e){var t=e.features.map((function(e){return e.properties}));if(0!==t.length){var n=Object.keys(t[0]||{}),r=[n.join(",")];return t.forEach((function(e){var t=n.map((function(t){return e[t]}));r.push(t.join(","))})),r.join("\n")}}(t):"JSON"===n?function(e){var t=e.features.map((function(e){return e.properties}));return JSON.stringify(t)}(t):"KML"===n?function(e){return c()(e)}(t):"",a=document.createElement("a");a.download="".concat(e,".").concat(n.toLowerCase()),a.href="data:text/json;charset=utf-8,".concat(encodeURIComponent(r)),a.target="_blank",a.rel="noreferrer",a.click()}}}]);